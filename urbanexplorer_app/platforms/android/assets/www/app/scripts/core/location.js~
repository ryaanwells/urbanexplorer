'use strict';

UrbanExplorer.factory('geolocation', function ($rootScope) {
  return {
    getCurrentPosition: function (onSuccess, onError, options) {
      navigator.geolocation.getCurrentPosition(
	function () {
          var that = this,
          args = arguments;
	  console.log("Success callback");
          if (onSuccess) {
	    console.log("success");
            $rootScope.$apply(function () {
              onSuccess.apply(that, args);
            });
          }
	}, function () {
          var that = this,
          args = arguments;
	  console.log("Failure callback");
          if (onError) {
	    console.log("fail");
            $rootScope.$apply(function () {
              onError.apply(that, args);
            });
          }
	},
	{enableHighAccuracy : true});
    }
  };
});
